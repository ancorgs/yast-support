// testedfiles: supportio.ycp

{

    include "testsuite.ycp";

    include "support/supportio.ycp";

    map<string,any> keydata =
    $[ "name1": "Washington",
       "name2": "Irwing",
       "salutation": "male",
       "company": "M&M",
       "street": "",
       "zip": "",
       "country": "Italy",
       "state": "",
       "city": "",
       "email": "WI@IW.jh",
       "key": "WI-CATCH22-Yo-Yo"
    ];

    DUMP (keydata);
    // keydata ok
	TEST (``(check_supportkey(keydata)), [ $[], $[], $[] ], nil);
    DUMP("----------------------");

    keydata =
    $[ "name1": "Washington",
       "name2": "Irwing",
       "salutation": "",
       "company": "M&M",
       "street": "",
       "zip": "",
       "country": "Italy",
       "state": "",
       "city": "",
       "email": "wi@iw.jh",
       "key": "WI-CATCH22-Yo-Yo"
    ];

    DUMP (keydata);
    // missing salutation
	TEST (``(check_supportkey(keydata)), [ $[], $[], $[] ], nil);
    DUMP("----------------------");

    keydata =
    $[ "name1": "Washington",
       "name2": "Irwing",
       "salutation": "Mr",
       "company": "M&M",
       "street": "",
       "zip": "",
       "country": "Italy",
       "state": "",
       "city": "",
       "email": "wi@iw",
       "key": "WI-CATCH22-Yo-Yo"
    ];

    DUMP (keydata);
    // bad email adress
	TEST (``(check_supportkey(keydata)), [ $[], $[], $[] ], nil);
    DUMP("----------------------");

    keydata =
    $[ "name1": "Washington",
       "name2": "Irwing",
       "salutation": "Mr",
       "company": "M&M",
       "street": "",
       "zip": "",
       "country": "Italy",
       "state": "",
       "city": "",
       "email": "wi@iw.jh",
       "key": "WI-CATCH22"
    ];

    DUMP (keydata);
    // short support key
	TEST (``(check_supportkey(keydata)), [ $[], $[], $[] ], nil);
}
